# 题目重申

已知:
$$
f\left(x\right)=\left\{\begin{array}{ll}-x&x<0\\\frac12f\left(x-f\left(x-1\right)\right)&x\geq0\end{array}\right.
$$
求$f(3)$的值.

# 运算规律回顾

> [!NOTE]
>
> 此处$d(\alpha) $ 为$1-6$中的$H(\alpha)$
>
> 此处$f(x)$为$1-6$中的$M(x)$





$d\left( \alpha  \right)$ 满足如下四条运算法则：
$$
\begin{aligned}&d\left(\alpha+1\right)=1+d\left(\alpha\right)\\&d\left(\omega^\alpha\left(k+1\right)+\beta\right)=k+d\left(\omega^\alpha+\beta\right),\beta<\omega^\alpha\\&d\left(\omega^{\alpha+1}+\beta\right)=2+d\left(\omega^\alpha+\beta\right),\beta<\omega^{\alpha+1}\\&d\left(\omega^\alpha+\beta\right)=1+d\left(\omega^{[\alpha]_{\chi(\alpha)}}+\beta\right),\beta<\omega^\alpha\end{aligned}
$$
其中$\chi(\alpha)$满足以下$7$条运算法则:

![img](https://pic1.zhimg.com/80/v2-975601596ee82292e9817c1492cace33_1440w.webp?source=2c26e567)

其中$[\alpha]_n$被称为$\alpha$的**规范序列(canonical sequence)**,定义如下:

> 1. $\beta<\omega^{\alpha+1}\text{ 时,}[\omega^{\alpha}+\beta]_n=\omega^{\alpha}+[\beta]_n$
> 2. $\left[\omega^{\alpha+1}\right]_n=n\omega^{\alpha}$
> 3. $\left[\omega^{\alpha}\right]_n=\omega^{[\alpha]_n}$



# 引理证明

1. 根据$d(\alpha) $运算法则$3$:
   $$
   d\left(\omega^{\alpha+1}+\beta\right)=2+d\left(\omega^\alpha+\beta\right)
   $$
   可得:
   $$
   d(\omega^ n)=2+d(\omega^{n-1})
   $$
   由$d(\omega)=3$,递推可得:
   $$
   d(\omega^ n)=2n+1
   $$

2. 根据$\chi(\alpha)$ 的运算法则$6$:
   $$
   \chi\left(\omega^{\alpha+1}\right)=d\left(\omega^{\alpha+1}\right)-d\left(\alpha\right)+1
   $$
   可得:
   $$
   \chi(\omega^n)=n+3
   $$
   

3. 由于$f(2)=\frac{1}{1024}$:
   $$
   d(\omega^\omega)=10
   $$
   

4. 根据$\chi(\alpha)$ 的运算法则$7$:
   $$
   \chi\left(\omega^{\alpha}k\right)=d\left(\omega^{\alpha}\right)-d\left(\alpha\right)+\chi\left(\alpha\right)
   $$
   可得:
   $$
   \chi(\omega^\omega)=11
   $$
   

# $f(3)$的值的求解

首先 $Ord\left( 3 \right) = {\omega ^{{\omega ^\omega }}}$ ，因此由$d(\alpha)$的定义可得 $f\left( 3 \right) = {2^{ - d\left( {{\omega ^{{\omega ^\omega }}}} \right)}}$ 

由$d(\alpha) $的运算法则4： 
$$
d\left( {{\omega ^\alpha } + \beta } \right) = 1 + d\left( {{\omega ^{{{\left[ \alpha  \right]}_{\chi \left( \alpha  \right)}}}} + \beta } \right)
$$
 可得:
$$
d\left( {{\omega ^{{\omega ^\omega }}}} \right) = 1 + d\left( {{\omega ^{{{\left[ {{\omega ^\omega }} \right]}_{\chi \left( {{\omega ^\omega }} \right)}}}}} \right)
$$
而 $\chi \left( {{\omega ^\omega }} \right) = 11$ ，由规范序数的定义， ${\left[ {{\omega ^\omega }} \right]_{11}} = {\omega ^{11}}$ ，因此 $d\left( {{\omega ^{{\omega ^\omega }}}} \right) = 1 + d\left( {{\omega ^{{\omega ^{11}}}}} \right)$ 



**首先先求 $d\left( {{\omega ^{{\omega ^2}}}} \right)$ **

> 由$d(\alpha) $的运算法则4:
> $$
> d\left( {{\omega ^{{\omega ^{2}}}}} \right) = 1 + d\left( {{\omega ^{{{\left[ {{\omega ^{2}}} \right]}_{\chi \left( {{\omega ^{2}}} \right)}}}}} \right)
> $$
> 由引理， $\chi \left( {{\omega ^2}} \right) = 2 + 3 = 5$ ，由规范序数的定义， ${\left[ {{\omega ^2}} \right]_5} = 5\omega $ 
>
> 因此 $d\left( {{\omega ^{{\omega ^2}}}} \right) = 1 + d\left( {{\omega ^{5\omega }}} \right)$ 
>
> 继续由$d(\alpha) $的运算法则4:
> $$
> d\left( {{\omega ^{5\omega }}} \right) = 1 + d\left( {{\omega ^{{{\left[ {5\omega } \right]}_{\chi \left( {5\omega } \right)}}}}} \right)
> $$
> 由$\chi(\alpha)$的运算法则5：
> $$
> \chi \left( {{\omega ^{\alpha  + 1}}\left( {k + 1} \right)} \right) = \chi \left( {{\omega ^{\alpha  + 1}}} \right) - 2
> $$
> 可得 
> $$
> \chi \left( {5\omega } \right) = \chi \left( {k\omega } \right) = \chi \left( \omega  \right) - 2 = 1 + 3 - 2 = 2 \quad k \ge 2
> $$
> 由规范序数的定义， ${\left[ {5\omega } \right]_2} = 4\omega  + 2$ ，因此 $d\left( {{\omega ^{5\omega }}} \right) = 1 + d\left( {{\omega ^{4\omega  + 2}}} \right)$ 
>
> 由$d(\alpha) $的运算法则3， $d\left( {{\omega ^{4\omega  + 2}}} \right) = 2 + d\left( {{\omega ^{4\omega  + 1}}} \right) = 4 + d\left( {{\omega ^{4\omega }}} \right)$ 
>
> 总的来看就是 $d\left( {{\omega ^{{\omega ^2}}}} \right) = 1 + d\left( {{\omega ^{5\omega }}} \right) = 2 + d\left( {{\omega ^{4\omega  + 2}}} \right) = 6 + \left( {{\omega ^{4\omega }}} \right)$ 
>
> 可以把上述过程表示为如下形式：
>
> $$
> {\omega ^2}\buildrel { + 1} \over  \longrightarrow 5\omega \buildrel { + 1} \over  \longrightarrow 4\omega  + 2\buildrel { + 2 \times 2} \over  \longrightarrow 4\omega
> $$
> 由于 $\chi \left( {5\omega } \right) = \chi \left( {k\omega } \right) = 2$ ，因此同理可得 $4\omega \buildrel { + 1} \over  \longrightarrow 3\omega  + 2\buildrel { + 2 \times 2} \over  \longrightarrow 3\omega $ ，即 $\omega $ 前的系数每减小1，要增加 $1 + 2 \times 2 = 5$ ，因此:
> $$
> {\omega ^2}\buildrel { + 1} \over  \longrightarrow 5\omega \buildrel { + 5 \times 4} \over  \longrightarrow \omega
> $$
> 而 $d\left( {{\omega ^\omega }} \right) = 10$ ，因此 $d\left( {{\omega ^{{\omega ^2}}}} \right) = 10 + 5 \times 4 + 1 = 31$ 



**然后求 $d\left( {{\omega ^{{\omega ^3}}}} \right)$ 的值**

> 由$d(\alpha) $的运算法则4:
> $$
> d\left( {{\omega ^{{\omega ^{3}}}}} \right) = 1 + d\left( {{\omega ^{{{\left[ {{\omega ^{3}}} \right]}_{\chi \left( {{\omega ^{3}}} \right)}}}}} \right)
> $$
> 由引理 $\chi \left( {{\omega ^3}} \right) = 3 + 3 = 6$ ，由规范序数的定义， ${\left[ {{\omega ^3}} \right]_6} = 6{\omega ^2}$ 
>
> 即 $d\left( {{\omega ^{{\omega ^3}}}} \right) = 1 + d\left( {{\omega ^{6{\omega ^2}}}} \right)$ 
>
> 由$d(\alpha) $的运算法则4:
> $$
> d\left( {{\omega ^{6{\omega ^2}}}} \right) = 1 + d\left( {{\omega ^{{{\left[ {6{\omega ^2}} \right]}_{\chi \left( {6{\omega ^2}} \right)}}}}} \right)
> $$
> 由$\chi(\alpha)$的运算法则5： 
> $$
> \chi \left( {6{\omega ^2}} \right) = \chi \left( {k{\omega ^2}} \right) = \chi \left( {{\omega ^2}} \right) - 2 = 2 + 3 - 2 = 3\quad ,k \ge 2
> $$
> 由规范序数的定义， ${\left[ {6{\omega ^2}} \right]_3} = 5{\omega ^2} + 3\omega $ 
>
> 即 $d\left( {{\omega ^{6{\omega ^2}}}} \right) = 1 + d\left( {{\omega ^{5{\omega ^2} + 3\omega }}} \right)$ 
>
> 继续用$d(\alpha) $的运算法则4:
> $$
> d\left( {{\omega ^{5{\omega ^2} + 3\omega }}} \right) = 1 + d\left( {{\omega ^{{{\left[ {5{\omega ^2} + 3\omega } \right]}_{\chi \left( {5{\omega ^2} + 3\omega } \right)}}}}} \right)
> $$
> 由$\chi(\alpha)$的运算法则1： 
> $$
> \chi \left( {{\omega ^\alpha }\left( {k + 1} \right) + \beta } \right) = \chi \left( {{\omega ^\alpha } + \beta } \right)
> $$
> 可得 $\chi \left( {5{\omega ^2} + 3\omega } \right) = \chi \left( {{\omega ^2} + 3\omega } \right)$ 
>
> 再由$\chi(\alpha)$的运算法则4：
> $$
> \chi \left( {{\omega ^{\alpha  + 1}} + \beta } \right) = \chi \left( {2{\omega ^\alpha } + \beta } \right)
> $$
> 可得 $\chi \left( {{\omega ^2} + 3\omega } \right) = \chi \left( {2\omega  + 3\omega } \right) = \chi \left( {5\omega } \right)$ 
>
> 上面已经求出 $\chi \left( {k\omega } \right) = 2,k \ge 2$ ，因此 $\chi \left( {{\omega ^2} + 3\omega } \right) = 2$ 
>
> 由规范序数的定义， ${\left[ {5{\omega ^2} + 3\omega } \right]_2} = 5{\omega ^2} + 2\omega  + 2$ 
>
> 对于 ${\omega ^3}$ 的情况，有： 
>
> $$
> {\omega ^3}\buildrel { + 1} \over  \longrightarrow 6{\omega ^2}\buildrel { + 1} \over  \longrightarrow 5{\omega ^2} + 3\omega \buildrel { + 1} \over  \longrightarrow 5{\omega ^2} + 2\omega  + 2\buildrel { + 2 \times 2} \over  \longrightarrow 5{\omega ^2} + 2\omega
> $$
> 可见对于指数上 $\omega $ 的运算，始终是从 $\omega $ 次数低的开始消去，结合上面得出的结论：$\omega $ 前的系数每减小1，要增加 $1 + 2 \times 2 = 5$ ，这里就可以得到：
>
> $$
> {\omega ^3}\buildrel { + 1} \over  \longrightarrow 6{\omega ^2}\buildrel { + 1} \over  \longrightarrow 5{\omega ^2} + 3\omega \buildrel { + 3 \times 5} \over  \longrightarrow 5{\omega ^2}
> $$
> 由此可以继续得出：${\omega ^2}$ 前的系数每减小1，要增加 $1 + 3 \times 5 = 16$ 
>
> 因此:
> $$
> {\omega ^3}\buildrel { + 1} \over  \longrightarrow 6{\omega ^2}\buildrel { + 16 \times 5} \over  \longrightarrow {\omega ^2}
> $$
> 而 $d\left( {{\omega ^{{\omega ^2}}}} \right) = 31$ 在上面已经求过了，因此 $d\left( {{\omega ^{{\omega ^3}}}} \right) = 31 + 16 \times 5 + 1 = 112$ 



**接着求 $d\left( {{\omega ^{{\omega ^4}}}} \right)$ 的值**

> 略过递推过程：
> $$
> {\omega ^4}\buildrel { + 1} \over  \longrightarrow 7{\omega ^3}\buildrel { + 1} \over  \longrightarrow 6{\omega ^3} + 4{\omega ^2}\buildrel { + 4 \times 16} \over  \longrightarrow 6{\omega ^3}
> $$
> 由此可得： ${\omega ^3}$ 前的系数每减小1，要增加 $1 + 4 \times 16 = 65$ 
>
> 因此:
> $$
> {\omega ^4}\buildrel { + 1} \over  \longrightarrow 7{\omega ^3}\buildrel { + 6 \times 65} \over  \longrightarrow {\omega ^3}
> $$
>  
>
> 根据上面求的 $d\left( {{\omega ^{{\omega ^3}}}} \right) = 112$ ，可得 $d\left( {{\omega ^{{\omega ^4}}}} \right) = 112 + 6 \times 65 + 1 = 503$ 



**将上述过程一般化**

> 对一般的 $n$ ，由于 $\chi \left( {{\omega ^n}} \right) = n + 3$ ，因此可得：
>
> $$
> {\omega ^n}\buildrel { + 1} \over  \longrightarrow \left( {n + 3} \right){\omega ^{n - 1}}\buildrel { + 1} \over  \longrightarrow \left( {n + 2} \right){\omega ^{n - 1}} + n{\omega ^{n - 2}}
> $$
>  
>
> 如果我们设 ${\omega ^n}$前的系数每减小1，要增加的量为 ${c_n}$ ，那么上述过程可继续推进：
>
> $$
> {\omega ^n}\buildrel { + 1} \over  \longrightarrow \left( {n + 3} \right){\omega ^{n - 1}}\buildrel { + 1} \over  \longrightarrow \left( {n + 2} \right){\omega ^{n - 1}} + n{\omega ^{n - 2}}\buildrel { + n \cdot {c_{n - 2}}} \over  \longrightarrow \left( {n + 2} \right){\omega ^{n - 1}}
> $$
>  
>
> 因此 ${\omega ^{n-1}}$ 前的系数每减小1，要增加的量为 $1 + n{c_{n - 2}}$ ，即 ${c_{n - 1}} = 1 + n{c_{n - 2}}$ ，因此数列 $\left\{ {{c_n}} \right\}$ 满足:
> $$
> \color{red}{{c_n} = 1 + \left( {n + 1} \right){c_{n - 1}},{c_0} = 2}
> $$
>  
>
> 而此时可得:
> $$
> {\omega ^n}\buildrel { + 1} \over  \longrightarrow \left( {n + 3} \right){\omega ^{n - 1}}\buildrel { + \left( {n + 2} \right){c_{n - 1}}} \over  \longrightarrow {\omega ^{n - 1}}
> $$
> 即:
> $$
> d\left( {{\omega ^{{\omega ^n}}}} \right) = 1 + \left( {n + 2} \right){c_{n - 1}} + d\left( {{\omega ^{{\omega ^{n - 1}}}}} \right)
> $$



若记 ${a_n} = d\left( {{\omega ^{{\omega ^n}}}} \right)$ ,则:
$$
\color{red}{{a_n} = 1 + \left( {n + 2} \right){c_{n - 1}} + {a_{n - 1}}，{a_0} = 3}
$$
 现在要求的便是 ${a_{11}}$ 的值

这个数列的递推关系和首项已经完全确定了，因此直接计算便可：

<img src="https://picx.zhimg.com/50/v2-2a2b84ede32d45fe12596a470e217c26_720w.jpg?source=2c26e567" data-caption="" data-size="normal" data-rawwidth="1385" data-rawheight="137" data-original-token="v2-2a2b84ede32d45fe12596a470e217c26" class="origin_image zh-lightbox-thumb" width="1385" data-original="https://picx.zhimg.com/v2-2a2b84ede32d45fe12596a470e217c26_r.jpg?source=2c26e567"/>划出来的部分便是 ${a_{11}}$ 了，而 $d\left( {{\omega ^{{\omega ^\omega }}}} \right) = 1 + {a_{11}} = 1541023937$ ，这样我们便成功得到了 $f\left( 3 \right) = {2^{ - 1541023937}}$ .